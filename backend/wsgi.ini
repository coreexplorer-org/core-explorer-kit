[uwsgi]
module = wsgi:app

# Load Python plugin (required for Python applications)
plugins = python3

master = true
processes = 1  # Single process for easier debugging in dev

# Use HTTP socket (for direct HTTP or proxy via nginx)
http-socket = 0.0.0.0:5000

# Development-friendly options
# Use polling-based auto-reload for better Docker volume compatibility (checks every 2 seconds)
py-autoreload = 2

# Alternative: touch-reload mechanism (touch /app/.reload to trigger reload)
# touch-reload = /app/.reload

# Logging for debugging
# Don't use logto - let uWSGI use default stderr (Docker captures it automatically)
# This avoids log rotation errors on file descriptors
log-5xx = true
log-4xx = true
disable-write-exception = true
# Disable log rotation checking to eliminate lseek errors
log-maxsize = 0
log-backupname = 

vacuum = true
die-on-term = true
chmod-socket = 666